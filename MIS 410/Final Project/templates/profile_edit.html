{% extends "base.html" %}
{% block content %}

<div class="row justify-content-center">
  <div class="col-lg-7">
    <div class="edit-profile-card">
      <h2 class="mb-4">Edit Profile</h2>

      <form method="POST" enctype="multipart/form-data">
        {{ form.hidden_tag() }}

        <!-- Profile Picture Section -->
        <div class="mb-4">
          <label class="form-label fw-semibold">Profile Picture</label>
          <div class="profile-edit-preview mb-3">
            {% if current_user.profile_image_filename %}
              <img 
                src="{{ url_for('static', filename='uploads/profiles/' ~ current_user.profile_image_filename) }}"
                alt="Profile picture"
                class="profile-edit-img">
            {% else %}
              <div class="profile-edit-placeholder">
                <i class="bi bi-person-fill"></i>
              </div>
            {% endif %}
          </div>
          {{ form.profile_image(class="form-control form-control-sm") }}
          <div class="form-text">JPG or PNG, max 5MB</div>
          {% for error in form.profile_image.errors %}
            <div class="text-danger small mt-2">{{ error }}</div>
          {% endfor %}
        </div>

        <!-- Name Field -->
        <div class="mb-4">
          {{ form.name.label(class="form-label fw-semibold") }}
          {{ form.name(class="form-control form-control-lg") }}
          {% for error in form.name.errors %}
            <div class="text-danger small mt-2">{{ error }}</div>
          {% endfor %}
        </div>

        <!-- Bio Field -->
        <div class="mb-4">
          {{ form.bio.label(class="form-label fw-semibold") }}
          {{ form.bio(class="form-control", rows="4", placeholder="Tell us about yourself...") }}
          <div class="form-text">Max 500 characters</div>
          {% for error in form.bio.errors %}
            <div class="text-danger small mt-2">{{ error }}</div>
          {% endfor %}
        </div>

        <!-- Email Field (Read-only) -->
        <div class="mb-4">
          <label class="form-label fw-semibold">Email</label>
          <input type="email" class="form-control form-control-lg" value="{{ current_user.email }}" disabled>
          <div class="form-text">Email address cannot be changed</div>
        </div>

        <!-- Social Links Section -->
        <div class="form-section-divider">
          <h4 class="form-section-title">Social Links (optional)</h4>
        </div>

        <!-- Website Field -->
        <div class="mb-4">
          {{ form.website.label(class="form-label fw-semibold") }}
          {{ form.website(class="form-control", placeholder="https://example.com") }}
          {% for error in form.website.errors %}
            <div class="text-danger small mt-2">{{ error }}</div>
          {% endfor %}
        </div>

        <!-- Twitter Field -->
        <div class="mb-4">
          {{ form.twitter.label(class="form-label fw-semibold") }}
          <div class="input-group">
            <span class="input-group-text">@</span>
            {{ form.twitter(class="form-control", placeholder="username") }}
          </div>
          {% for error in form.twitter.errors %}
            <div class="text-danger small mt-2">{{ error }}</div>
          {% endfor %}
        </div>

        <!-- Instagram Field -->
        <div class="mb-4">
          {{ form.instagram.label(class="form-label fw-semibold") }}
          <div class="input-group">
            <span class="input-group-text">@</span>
            {{ form.instagram(class="form-control", placeholder="username") }}
          </div>
          {% for error in form.instagram.errors %}
            <div class="text-danger small mt-2">{{ error }}</div>
          {% endfor %}
        </div>

        <!-- LinkedIn Field -->
        <div class="mb-4">
          {{ form.linkedin.label(class="form-label fw-semibold") }}
          {{ form.linkedin(class="form-control", placeholder="https://linkedin.com/in/username") }}
          {% for error in form.linkedin.errors %}
            <div class="text-danger small mt-2">{{ error }}</div>
          {% endfor %}
        </div>

        <!-- Action Buttons -->
        <div class="d-grid gap-2 mt-5">
          <button type="submit" class="btn btn-primary btn-lg">
            Save Changes
          </button>
          <a href="{{ url_for('profile') }}" class="btn btn-outline-secondary">
            Cancel
          </a>
        </div>
      </form>
    </div>
  </div>
</div>

{% endblock %}
